# 位运算符

C 语言提供一些位运算符，用来操作二进制位（bit）和任何 “整型”的**数据类型**上。



## 一些例子

![image-20221118180332748](%E4%BD%8D%E7%BA%A7%E8%BF%90%E7%AE%97%E4%B8%8E%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97.assets/image-20221118180332748-16687658137121.png)







## （1）取反运算符`～`

取反运算符`～`是一个一元运算符，用来将每一个二进制位变成相反值，即`0`变成`1`，`1`变成`0`。

```c
// 返回 01101100
~ 10010011
```





上面示例中，`~`对每个二进制位取反，就得到了一个新的值。

注意，`~`运算符不会改变变量的值，只是返回一个新的值。

## （2）与运算符`&`

与运算符`&`将两个值的每一个二进制位进行比较，返回一个新的值。当两个二进制位都为`1`，就返回`1`，否则返回`0`。

```c
// 返回 00010001
10010011 & 00111101
```

上面示例中，两个八位二进制数进行逐位比较，返回一个新的值。

与运算符`&`可以与赋值运算符`=`结合，简写成`&=`。

```c
int val = 3;
val = val & 0377;

// 简写成
val &= 0377;
```

## （3）或运算符`|`

或运算符`|`将两个值的每一个二进制位进行比较，返回一个新的值。两个二进制位只要有一个为`1`（包含两个都为`1`的情况），就返回`1`，否则返回`0`。

```c
// 返回 10111111
10010011 | 00111101
```

或运算符`|`可以与赋值运算符`=`结合，简写成`|=`。

```c
int val = 3;
val = val | 0377;

// 简写为
val |= 0377;
```

## （4）异或运算符`^`

异或运算符`^`将两个值的每一个二进制位进行比较，返回一个新的值。两个二进制位有且仅有一个为`1`，就返回`1`，否则返回`0`。

```
// 返回 10101110
10010011 ^ 00111101
    
    
    
a ^ (a ^ b) = (a ^ a)^b = 
```

异或运算符`^`可以与赋值运算符`=`结合，简写成`^=`。

```c
int val = 3;
val = val ^ 0377;

// 简写为
val ^= 0377;
```



## 方法

任何‘整型’数据。先转换为**二进制**进行运算。然后转换成**十六进制**。









## e 练习题 2.10

对于任一位向量 a ^a = 0。应用这一属性，考虑下面的程序。



### ^运算符

只有一种情况为1. 那就是仅有一个二进制为1的情况下。才会为1.

 三个步骤的结果。

指针这个概念还要去看下。

```c#
void inplace_swap(int* x, int* y) {
    
    
    * y = *x ^ *y; /* Step 1 */
    // *x = a 
    // *y = a^b
    
    *x = *x ^ *y; /* Step 2 */
    // *x = a^(a^b) = (a^a)^b = b
    // *y = a^b
    
    *y = *x ^ *y  /* Step 3 */;
    // *x = b
    // *y = b ^ a^b = (b^b)^a = a
}
```







## e 练习题 2.11



```
首先你要看懂这个函数的作用。
否则这个作业是写不出来的。
```







# 逻辑运算

## 运算符表示

逻辑运算符提供逻辑判断功能，用于构建更复杂的表达式，主要有下面三个运算符。

- `!`：否运算符（改变单个表达式的真伪）。
- `&&`：与运算符（两侧的表达式都为真，则为真，否则为伪）。
- `||`：或运算符（两侧至少有一个表达式为真，则为真，否则为伪）。



### &&

```c
if (x < 10 && y > 20)
  printf("Doing something!\n");
```

上面示例中，只有`x < 10`和`y > 20`同时为真，`x < 10 && y > 20`才会为真。

### ！

```c
if (!(x < 12))
  printf("x is not less than 12\n");
```

上面示例中，由于否运算符`!`具有比`<`更高的优先级，所以必须使用括号，才能对表达式`x < 12`进行否运算。当然，合理的写法是`if (x >= 12)`，这里只是为了举例。

对于逻辑运算符来说，任何非零值都表示真，零值表示伪。比如，`5 || 0`会返回`1`，`5 && 0`会返回`0`。



### 优先级左侧表达式求值

逻辑运算符还有一个特点，它总是先对左侧的表达式求值，再对右边的表达式求值，这个顺序是保证的。如果左边的表达式满足逻辑运算符的条件，就不再对右边的表达式求值。这种情况称为“短路”。

```c
if (number != 0 && 12/number == 2)
```

上面示例中，如果`&&`左侧的表达式（`number != 0`）为伪，即`number`等于`0`时，右侧的表达式（`12/number == 2`）是不会执行的。因为这时左侧表达式返回`0`，整个`&&`表达式肯定为伪，就直接返回`0`，不再执行右侧的表达式了。

由于逻辑运算符的执行顺序是先左后右，所以下面的代码是有问题的。

```c
while ((x++ < 10) && (x + y < 20))
```

上面示例中，执行左侧表达式后，变量`x`的值就已经变了。等到执行右侧表达式的时候，是用新的值在计算，这通常不是原始意图。







### e 练习题 2.14 位于逻辑运算的混合搭配







### e 2.15 

只使用位级和逻辑运算，编写一个c表达式，等价于

如果 x == y  返回1.否则返回0，其他情况都为false。